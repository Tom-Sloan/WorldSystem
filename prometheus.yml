global:
  scrape_interval: 5s  # How frequently to scrape

scrape_configs:
  # cAdvisor
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']

  # RabbitMQ
  - job_name: 'rabbitmq'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['rabbitmq:15692']

  # Server (uses default bridge network)
  - job_name: 'server'
    static_configs:
      - targets: ['server:5001']  # If you expose metrics on port 5001, path /metrics

  # NVIDIA DCGM Exporter
  - job_name: 'nvidia-dcgm-exporter'
    static_configs:
      - targets: ['nvidia-dcgm-exporter:9400']

  # Reconstruction (uses default bridge network)
  - job_name: 'reconstruction'
    static_configs:
      - targets: ['reconstruction:8001']

  # Data Storage (uses host network mode)
  - job_name: 'data_storage'
    static_configs:
      - targets: ['host.docker.internal:8002']

  # Jaeger
  - job_name: 'jaeger'
    static_configs:
      - targets: ['jaeger:14269'] 

  # Frame Processor (uses host network mode)
  - job_name: 'frame_processor'
    static_configs:
      - targets: ['host.docker.internal:8003']

  # SLAM3R (uses host network mode, when running)
  - job_name: 'slam3r'
    static_configs:
      - targets: ['host.docker.internal:8000']

  # MAST3R (uses host network mode, when running)  
  - job_name: 'mast3r'
    static_configs:
      - targets: ['host.docker.internal:8001']

  # Mesh Service (uses host network mode, when running)
  - job_name: 'mesh_service'
    static_configs:
      - targets: ['host.docker.internal:8006']
    metrics_path: '/metrics'
    scrape_interval: 5s